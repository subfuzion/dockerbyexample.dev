<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.85.0"><link rel=canonical type=text/html href=/basics/time/><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Time | Docker by Example</title><meta name=description content="Learn Docker by Example"><meta property="og:title" content="Time"><meta property="og:description" content="Learn Docker by Example"><meta property="og:type" content="website"><meta property="og:url" content="/basics/time/"><meta property="og:site_name" content="Docker by Example"><meta itemprop=name content="Time"><meta itemprop=description content="Learn Docker by Example"><meta name=twitter:card content="summary"><meta name=twitter:title content="Time"><meta name=twitter:description content="Learn Docker by Example"><link rel=preload href=/scss/main.min.3383b4566c7deb0afd964b6908212a9f4cf306ffb99d356ccfdbe24494b0920f.css as=style><link href=/scss/main.min.3383b4566c7deb0afd964b6908212a9f4cf306ffb99d356ccfdbe24494b0920f.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css><style>.pageinfo{margin:2rem 2rem 2rem 0}.border-top{border-top:0 solid #dee2e6!important}hr{height:4px;background-color:rgba(37,152,237,5%)!important;border:none}.td-navbar{background:#f8f9fa}.td-content .highlight{margin:0;margin-bottom:2rem}</style><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-00000000-0','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-light flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="64pt" height="64pt" viewBox="0 0 64 64"><g transform="translate(0.000000,64.000000) scale(0.012500,-0.012500)" fill="#000" stroke="none"><path d="M2177 4799c-43-25-47-53-47-349v-280h-606c-396 0-612-4-625-10-45-25-49-52-49-350v-280H564c-176 0-293-4-305-10-45-25-49-52-49-350v-280h-76c-71 0-77-2-106-31l-31-30 6-187c15-506 161-905 436-1195 242-254 563-407 976-462 176-24 559-17 757 14 869 135 1636 631 2108 1363l75 116 48 6c119 16 306 94 430 178 77 53 187 157 242 230 37 49 45 68 45 103 0 53-23 84-93 124-130 74-301 123-473 136l-92 7-12 42c-32 107-132 258-232 351-136 126-203 131-277 22-110-162-164-412-132-611 11-64 10-79-4-105-20-40-63-61-125-61h-50v275c0 293-4 320-49 345-12 6-129 10-305 10h-286v6e2c0 643 0 643-49 670-26 14-740 13-764-1zm593-419v-210h-210-210v210 210h210 210v-210zm-1280-640v-210h-210-210v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zM850 31e2v-210H640 430v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zm-2245-882c132-70 142-264 17-352-131-93-321 9-322 173-1 151 169 250 305 179z"/></g></svg></span><span class="text-uppercase font-weight-bold">Docker by Example</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/basics/time/>Return to the regular view of this page</a>.</p></div><h1 class=title>Time</h1><ul><li>1: <a href=#pg-a1a42d6c2387353866d4b023a76d333b>Dockerfile with CMD</a></li><li>2: <a href=#pg-2bb292d30c11e80ec20e8d6ecb0a4fcd>Dockerfile with ENTRYPOINT</a></li><li>3: <a href=#pg-d26375de7ead68483c0fe0c29cea4f01>Dockerfile with ENTRYPOINT</a></li><li>4: <a href=#pg-0abe9843d2090ec93c5fba583ac0404e>Summary</a></li></ul><div class=content><p>Navigate to the <code>basics/time</code> directory in the examples repo.</p><p>Take a look at the <code>get-time.sh</code> bash script.</p><ul class="nav nav-tabs" id=tabs-0 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-0-0-tab data-toggle=tab href=#tabs-0-0 role=tab aria-controls=tabs-0-0 aria-selected=true>get-time.sh</a></li></ul><div class=tab-content id=tabs-0-content><div class="tab-pane fade show active" id=tabs-0-0 role=tabpanel aria-labelled-by=tabs-0-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#8f5902;font-style:italic># Ref: See section on Daytime Protocol</span>
<span style=color:#8f5902;font-style:italic># https://www.nist.gov/pml/time-and-frequency-division/time-distribution/internet-time-service-its</span>

<span style=color:#8f5902;font-style:italic># first arg is frequency, default is 5 seconds</span>
<span style=color:#000>freq</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>1</span><span style=color:#204a87;font-weight:700>:-</span><span style=color:#000>5</span><span style=color:#4e9a06>}</span>
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;Fetch UTC(NIST) time every </span><span style=color:#4e9a06>${</span><span style=color:#000>freq</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06> seconds...&#34;</span>

<span style=color:#204a87;font-weight:700>while</span> true<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span>
  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>dt</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>cat &lt;/dev/tcp/time.nist.gov/13 <span style=color:#000;font-weight:700>|</span> tail -n 1<span style=color:#204a87;font-weight:700>)</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>then</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>[[</span> <span style=color:#4e9a06>&#34;</span><span style=color:#000>$dt</span><span style=color:#4e9a06>&#34;</span> <span style=color:#ce5c00;font-weight:700>=</span>~ .*<span style=color:#4e9a06>&#34;UTC(NIST)&#34;</span>.* <span style=color:#ce5c00;font-weight:700>]]</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>then</span>
      <span style=color:#000>d</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;</span><span style=color:#000>$dt</span><span style=color:#4e9a06>&#34;</span> <span style=color:#000;font-weight:700>|</span> cut -d <span style=color:#4e9a06>&#34; &#34;</span> -f 2<span style=color:#204a87;font-weight:700>)</span>
      <span style=color:#000>t</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;</span><span style=color:#000>$dt</span><span style=color:#4e9a06>&#34;</span> <span style=color:#000;font-weight:700>|</span> cut -d <span style=color:#4e9a06>&#34; &#34;</span> -f 3<span style=color:#204a87;font-weight:700>)</span>
      <span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;</span><span style=color:#000>$d</span><span style=color:#4e9a06> </span><span style=color:#000>$t</span><span style=color:#4e9a06>&#34;</span>
    <span style=color:#204a87;font-weight:700>fi</span>
  <span style=color:#204a87;font-weight:700>fi</span>
  sleep <span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>freq</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span>
<span style=color:#204a87;font-weight:700>done</span></code></pre></div></div></div><p>Using a loop, this program reads a TCP socket on a Linux-based system for
fetching the current time from the <a href=https://www.nist.gov/pml/time-and-frequency-division/time-distribution/internet-time-service-its>NIST Internet time
service</a>
and prints a formatted version of the response to the terminal.</p><p>The program accepts an argument specifying the frequency for fetching the time
in seconds, defaulting to 5 if not provided.</p><p>You can test the program on your own machine.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>chmod +x get-time.sh
./get-time.sh 1
</code></pre></div><ul class="nav nav-tabs" id=tabs-1 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-1-0-tab data-toggle=tab href=#tabs-1-0 role=tab aria-controls=tabs-1-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-1-content><div class="tab-pane fade show active" id=tabs-1-0 role=tabpanel aria-labelled-by=tabs-1-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Fetch UTC(NIST) time every 1 seconds...
21-09-02 18:15:02
21-09-02 18:15:03
21-09-02 18:15:04
21-09-02 18:15:12
^C</code></pre></div></div></div><div class="pageinfo pageinfo-primary"><p>😲 <strong>Note</strong></p><p>If this doesn&rsquo;t work on your machine, don&rsquo;t worry, you&rsquo;ve
just experienced one of the big reasons why containers are so useful!</p><p>Continue to the next page to containerize the time app so we can run it in a
standard Linux environment that will work everywhere Docker is supported.</p></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-a1a42d6c2387353866d4b023a76d333b>1 - Dockerfile with CMD</h1><p>In the Dockerfile for the previous example, you used the <code>ENTRYPOINT</code>
instruction to specify the process to execute in the container. This time you&rsquo;ll
use the <code>CMD</code> instruction instead and then explore the differences between the
two.</p><ul class="nav nav-tabs" id=tabs-0 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-0-0-tab data-toggle=tab href=#tabs-0-0 role=tab aria-controls=tabs-0-0 aria-selected=true>Dockerfile.using_cmd</a></li></ul><div class=tab-content id=tabs-0-content><div class="tab-pane fade show active" id=tabs-0-0 role=tabpanel aria-labelled-by=tabs-0-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-docker data-lang=docker><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#4e9a06> debian</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>COPY</span> get-time.sh /usr/local/bin<span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>RUN</span> chmod +x /usr/local/bin/get-time.sh<span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>CMD</span> <span style=color:#000;font-weight:700>[</span> <span style=color:#4e9a06>&#34;/usr/local/bin/get-time.sh&#34;</span> <span style=color:#000;font-weight:700>]</span></code></pre></div></div></div><p>Build a Docker image to run this.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker build -f Dockerfile.using_cmd -t get-time .
</code></pre></div><p>Since Docker looks for <code>Dockerfile</code> by default and you&rsquo;re going to try using a
few different Dockerfiles, you need to use the <code>-f</code> option to be explicit about
which one to use for the build.</p><p>Now print the time using a container.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker run -it --rm --name timectr get-time
</code></pre></div><ul class="nav nav-tabs" id=tabs-1 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-1-0-tab data-toggle=tab href=#tabs-1-0 role=tab aria-controls=tabs-1-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-1-content><div class="tab-pane fade show active" id=tabs-1-0 role=tabpanel aria-labelled-by=tabs-1-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Fetch UTC(NIST) time every 5 seconds...
21-09-02 19:28:45
21-09-02 19:28:51</code></pre></div></div></div><p>We used a new option for the <code>docker run</code> command: <code>-it</code>. This is actually a
combined option using two short flags, <code>-i</code> and <code>-t</code>. The first allows us to
pass input to the container over <code>stdin</code>; the second attaches a pseudo-terminal,
which means for one thing it can respond to the <code>SIGINT</code> signal when you press
<code>Ctrl-C</code> on your keyboard to terminate the process.</p><p>The container appears to behave the same way as when we used <code>ENTRYPOINT</code>
before. However, one difference is that <code>CMD</code> acts more like a default. You
can easily override the default command, as shown below.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker run -it --rm --name timectr get-time echo hello
</code></pre></div><ul class="nav nav-tabs" id=tabs-2 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-2-0-tab data-toggle=tab href=#tabs-2-0 role=tab aria-controls=tabs-2-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-2-content><div class="tab-pane fade show active" id=tabs-2-0 role=tabpanel aria-labelled-by=tabs-2-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>hello</code></pre></div></div></div><p>The <code>get-time.sh</code> script is no longer executed; instead, the command <code>echo</code> with
the argument <code>hello</code> was executed in the container. Since the base image for the
<code>get-time</code> image was <code>debian</code>, the standard <code>echo</code> command exists in the path
when the container is launched.</p><p>Because the argument that you provide in the <code>docker run</code> command replaces the
default command, you can&rsquo;t just provide the frequency option like this (since
there is no <code>2</code> command).</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text># this won&#39;t work!
docker run -it --rm --name timectr get-time 2
</code></pre></div><p>Instead, you need to supply the entire command to override the default one:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker run -it --rm --name timectr get-time get-time.sh 2
</code></pre></div><ul class="nav nav-tabs" id=tabs-3 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-3-0-tab data-toggle=tab href=#tabs-3-0 role=tab aria-controls=tabs-3-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-3-content><div class="tab-pane fade show active" id=tabs-3-0 role=tabpanel aria-labelled-by=tabs-3-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Fetch UTC(NIST) time every 2 seconds...
21-09-02 19:29:42
21-09-02 19:29:44
^C</code></pre></div></div></div><p>Since <code>/usr/local/bin</code> is in the path for the <code>debian</code> image, it wasn&rsquo;t
necessary to fully qualify the path for <code>get-time.sh</code>. The fully-qualified
path was used in the <code>CMD</code> instruction is often a good practice for clarity.</p><p>Let&rsquo;s revisit using <code>ENTRYPOINT</code> next.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-2bb292d30c11e80ec20e8d6ecb0a4fcd>2 - Dockerfile with ENTRYPOINT</h1><p>What if we want to override the container to behave the way it does with an
<code>ENTRYPOINT</code>, but we want to override the default frequency of <code>5</code> seconds?</p><p>You use <em>both</em> <code>ENTRYPOINT</code> and <code>CMD</code>.</p><ul class="nav nav-tabs" id=tabs-0 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-0-0-tab data-toggle=tab href=#tabs-0-0 role=tab aria-controls=tabs-0-0 aria-selected=true>Dockerfile.using_both</a></li></ul><div class=tab-content id=tabs-0-content><div class="tab-pane fade show active" id=tabs-0-0 role=tabpanel aria-labelled-by=tabs-0-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-docker data-lang=docker><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#4e9a06> debian</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>COPY</span> get-time.sh /usr/local/bin<span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>RUN</span> chmod +x /usr/local/bin/get-time.sh<span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>ENTRYPOINT</span> <span style=color:#000;font-weight:700>[</span> <span style=color:#4e9a06>&#34;/usr/local/bin/get-time.sh&#34;</span> <span style=color:#000;font-weight:700>]</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>CMD</span> <span style=color:#000;font-weight:700>[</span> <span style=color:#4e9a06>&#34;2&#34;</span> <span style=color:#000;font-weight:700>]</span></code></pre></div></div></div><p>Rebuild the Docker image.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker build -f Dockerfile.using_entrypoint -t get-time .
</code></pre></div><p>Run a container.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker run -it --rm --name timectr get-time
</code></pre></div><ul class="nav nav-tabs" id=tabs-1 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-1-0-tab data-toggle=tab href=#tabs-1-0 role=tab aria-controls=tabs-1-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-1-content><div class="tab-pane fade show active" id=tabs-1-0 role=tabpanel aria-labelled-by=tabs-1-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Fetch UTC(NIST) time every 2 seconds...
21-09-02 19:30:53
^C</code></pre></div></div></div><p>What happens here is that the value for <code>CMD</code> acts as a default argument that
will be passed to the command specified by <code>ENTRYPOINT</code>. You can still pass an
argument when you create the container and it will just override <code>CMD</code>s default
value.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker run -it --rm --name timectr get-time 3
</code></pre></div><ul class="nav nav-tabs" id=tabs-2 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-2-0-tab data-toggle=tab href=#tabs-2-0 role=tab aria-controls=tabs-2-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-2-content><div class="tab-pane fade show active" id=tabs-2-0 role=tabpanel aria-labelled-by=tabs-2-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Fetch UTC(NIST) time every 3 seconds...</code></pre></div></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-d26375de7ead68483c0fe0c29cea4f01>3 - Dockerfile with ENTRYPOINT</h1><p>Let&rsquo;s rebuild the <code>get-time</code> image using an <code>ENTRYPOINT</code>.</p><ul class="nav nav-tabs" id=tabs-0 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-0-0-tab data-toggle=tab href=#tabs-0-0 role=tab aria-controls=tabs-0-0 aria-selected=true>Dockerfile.using_entrypoint</a></li></ul><div class=tab-content id=tabs-0-content><div class="tab-pane fade show active" id=tabs-0-0 role=tabpanel aria-labelled-by=tabs-0-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-docker data-lang=docker><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#4e9a06> debian</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>COPY</span> get-time.sh /usr/local/bin<span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>RUN</span> chmod +x /usr/local/bin/get-time.sh<span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>ENTRYPOINT</span> <span style=color:#000;font-weight:700>[</span> <span style=color:#4e9a06>&#34;/usr/local/bin/get-time.sh&#34;</span> <span style=color:#000;font-weight:700>]</span></code></pre></div></div></div><p>Rebuild the Docker image.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker build -f Dockerfile.using_entrypoint -t get-time .
</code></pre></div><p>Now run a container.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker run -it --rm --name timectr get-time
</code></pre></div><ul class="nav nav-tabs" id=tabs-1 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-1-0-tab data-toggle=tab href=#tabs-1-0 role=tab aria-controls=tabs-1-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-1-content><div class="tab-pane fade show active" id=tabs-1-0 role=tabpanel aria-labelled-by=tabs-1-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Fetch UTC(NIST) time every 5 seconds...
21-09-02 19:30:53
^C</code></pre></div></div></div><p>So far the behavior seems the same. However, unlike with <code>CMD</code>, arguments
don&rsquo;t override the <code>ENTRYPOINT</code>; instead, they are passed to. This behavior is
more aligned with our expectations for containers that run specific programs.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker run -it --rm --name timectr get-time 2
</code></pre></div><ul class="nav nav-tabs" id=tabs-2 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-2-0-tab data-toggle=tab href=#tabs-2-0 role=tab aria-controls=tabs-2-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-2-content><div class="tab-pane fade show active" id=tabs-2-0 role=tabpanel aria-labelled-by=tabs-2-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Fetch UTC(NIST) time every 2 seconds...
21-09-02 19:33:26
21-09-02 19:33:28
^C</code></pre></div></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-0abe9843d2090ec93c5fba583ac0404e>4 - Summary</h1><p>The <code>time</code> example introduced you to the difference between <code>ENTRYPOINT</code>
and <code>CMD</code>, and how you can use both together.</p><p>In summary, use <code>CMD</code> when you might want to run other processes in the
container. Some containers are specifically designed to make multiple tool
commands available, so using <code>CMD</code> is convenient.</p><p>Use <code>ENTRYPOINT</code> when you want a container to behave like a specific tool and
you want to easily supply arguments without inadvertently overriding the default
command.</p><p>Use <code>ENTRYPOINT</code> and <code>CMD</code> together when you want the behavior of using
<code>ENTRYPOINT</code>, but want to specify potentially more appropriate <strong>default</strong>
arguments using <code>CMD</code> that will
override the containerized program&rsquo;s defaults. The nice thing about this
combination is that you can <strong>still</strong> override the <code>CMD</code> defaults when you
launch a container!</p><p>For options that should not be overridden, they should be specified as part of
the <code>ENTRYPOINT</code> instruction). Any options set using <code>CMD</code> or when running a
container will be appended to the <code>ENTRYPOINT</code> options.</p><p>Finally, as with <code>CMD</code>, you can even override the <code>ENTRYPOINT</code> when you run a
container. It just takes requires a little more work at the command line:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker run -it --rm --name timectr --entrypoint echo get-time hello
</code></pre></div><ul class="nav nav-tabs" id=tabs-0 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-0-0-tab data-toggle=tab href=#tabs-0-0 role=tab aria-controls=tabs-0-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-0-content><div class="tab-pane fade show active" id=tabs-0-0 role=tabpanel aria-labelled-by=tabs-0-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>hello</code></pre></div></div></div><p>You use the <code>--entrypoint</code> option to specify the command (ex, <code>echo</code>), and then
supply an argument after the image name (ex, <code>hello</code>) as usual.</p></div></main></div></div><footer class="bg-secondary py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-8 text-left"><small class=text-muted>&copy; 2021 <a href=https://twitter.com/tonypujals target=_blank rel=noopener>Tony Pujals</a>. All Rights Reserved.</small></div><div class="col-4 text-right"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-muted target=_blank rel=noopener href=https://twitter.com/tonypujals aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-muted target=_blank rel=noopener href=https://github.com/subfuzion/dockerbyexample.dev aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/js/main.min.5c74b870c6953931a705f390a49c7e4c0a842ec5c83b24354758dd674343ed0d.js integrity="sha256-XHS4cMaVOTGnBfOQpJx+TAqELsXIOyQ1R1jdZ0ND7Q0=" crossorigin=anonymous></script><script src=/js/prism.js></script></body></html>