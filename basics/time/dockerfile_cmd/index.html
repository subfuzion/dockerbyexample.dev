<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.85.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Dockerfile with CMD | Docker by Example</title><meta name=description content="Learn Docker by Example"><meta property="og:title" content="Dockerfile with CMD"><meta property="og:description" content="In the Dockerfile for the previous example, you used the ENTRYPOINT instruction to specify the process to execute in the container. This time you&rsquo;ll use the CMD instruction instead and then explore the differences between the two.
Dockerfile.using_cmd   FROMdebianCOPY get-time.sh /usr/local/binRUN chmod +x /usr/local/bin/get-time.shCMD [ &#34;/usr/local/bin/get-time.sh&#34; ]  Build a Docker image to run this.
docker build -f Dockerfile.using_cmd -t get-time . Since Docker looks for Dockerfile by default and you&rsquo;re going to try using a few different Dockerfiles, you need to use the -f option to be explicit about which one to use for the build."><meta property="og:type" content="article"><meta property="og:url" content="/basics/time/dockerfile_cmd/"><meta property="article:section" content="basics"><meta property="og:site_name" content="Docker by Example"><meta itemprop=name content="Dockerfile with CMD"><meta itemprop=description content="In the Dockerfile for the previous example, you used the ENTRYPOINT instruction to specify the process to execute in the container. This time you&rsquo;ll use the CMD instruction instead and then explore the differences between the two.
Dockerfile.using_cmd   FROMdebianCOPY get-time.sh /usr/local/binRUN chmod +x /usr/local/bin/get-time.shCMD [ &#34;/usr/local/bin/get-time.sh&#34; ]  Build a Docker image to run this.
docker build -f Dockerfile.using_cmd -t get-time . Since Docker looks for Dockerfile by default and you&rsquo;re going to try using a few different Dockerfiles, you need to use the -f option to be explicit about which one to use for the build."><meta itemprop=wordCount content="391"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Dockerfile with CMD"><meta name=twitter:description content="In the Dockerfile for the previous example, you used the ENTRYPOINT instruction to specify the process to execute in the container. This time you&rsquo;ll use the CMD instruction instead and then explore the differences between the two.
Dockerfile.using_cmd   FROMdebianCOPY get-time.sh /usr/local/binRUN chmod +x /usr/local/bin/get-time.shCMD [ &#34;/usr/local/bin/get-time.sh&#34; ]  Build a Docker image to run this.
docker build -f Dockerfile.using_cmd -t get-time . Since Docker looks for Dockerfile by default and you&rsquo;re going to try using a few different Dockerfiles, you need to use the -f option to be explicit about which one to use for the build."><link rel=preload href=/scss/main.min.3383b4566c7deb0afd964b6908212a9f4cf306ffb99d356ccfdbe24494b0920f.css as=style><link href=/scss/main.min.3383b4566c7deb0afd964b6908212a9f4cf306ffb99d356ccfdbe24494b0920f.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css><style>.pageinfo{margin:2rem 2rem 2rem 0}.border-top{border-top:0 solid #dee2e6!important}hr{height:4px;background-color:rgba(37,152,237,5%)!important;border:none}.td-navbar{background:#f8f9fa}.td-content .highlight{margin:0;margin-bottom:2rem}</style><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-00000000-0','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-light flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="64pt" height="64pt" viewBox="0 0 64 64"><g transform="translate(0.000000,64.000000) scale(0.012500,-0.012500)" fill="#000" stroke="none"><path d="M2177 4799c-43-25-47-53-47-349v-280h-606c-396 0-612-4-625-10-45-25-49-52-49-350v-280H564c-176 0-293-4-305-10-45-25-49-52-49-350v-280h-76c-71 0-77-2-106-31l-31-30 6-187c15-506 161-905 436-1195 242-254 563-407 976-462 176-24 559-17 757 14 869 135 1636 631 2108 1363l75 116 48 6c119 16 306 94 430 178 77 53 187 157 242 230 37 49 45 68 45 103 0 53-23 84-93 124-130 74-301 123-473 136l-92 7-12 42c-32 107-132 258-232 351-136 126-203 131-277 22-110-162-164-412-132-611 11-64 10-79-4-105-20-40-63-61-125-61h-50v275c0 293-4 320-49 345-12 6-129 10-305 10h-286v6e2c0 643 0 643-49 670-26 14-740 13-764-1zm593-419v-210h-210-210v210 210h210 210v-210zm-1280-640v-210h-210-210v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zM850 31e2v-210H640 430v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zm640 0v-210h-210-210v210 210h210 210v-210zm-2245-882c132-70 142-264 17-352-131-93-321 9-322 173-1 151 169 250 305 179z"/></g></svg></span><span class="text-uppercase font-weight-bold">Docker by Example</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m--li><a href=/ title="Docker by Example" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-><span>Examples</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-get_started-li><a href=/get_started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-get_started><span>Getting Started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-basics-li><a href=/basics/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-basics><span>The Basics</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-basicshelloworld-li><a href=/basics/helloworld/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-basicshelloworld><span>Hello World</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-basicshelloworldthe_script-li><a href=/basics/helloworld/the_script/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-basicshelloworldthe_script><span>The shell script</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-basicshelloworldthe_dockerfile-li><a href=/basics/helloworld/the_dockerfile/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-basicshelloworldthe_dockerfile><span>The Dockerfile</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-basicshelloworldrun_container-li><a href=/basics/helloworld/run_container/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-basicshelloworldrun_container><span>Run a container</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-basicshelloworldsummary-li><a href=/basics/helloworld/summary/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-basicshelloworldsummary><span>Summary</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-basicstime-li><a href=/basics/time/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-basicstime><span>Time</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-basicstimedockerfile_cmd-li><a href=/basics/time/dockerfile_cmd/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-basicstimedockerfile_cmd><span class=td-sidebar-nav-active-item>Dockerfile with CMD</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-basicstimedockerfile_both-li><a href=/basics/time/dockerfile_both/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-basicstimedockerfile_both><span>Dockerfile with ENTRYPOINT</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-basicstimedockerfile_entrypoint-li><a href=/basics/time/dockerfile_entrypoint/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-basicstimedockerfile_entrypoint><span>Dockerfile with ENTRYPOINT</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-basicstimesummary-li><a href=/basics/time/summary/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-basicstimesummary><span>Summary</span></a></li></ul></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/subfuzion/dockerbyexample.dev/edit/main/content/en/basics/time/dockerfile_cmd.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/subfuzion/dockerbyexample.dev/new/main/content/en/basics/time/dockerfile_cmd.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/subfuzion/dockerbyexample.dev/issues/new?title=Dockerfile%20with%20CMD" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/subfuzion/dockerbyexample.dev-examples/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
<a id=print href=/basics/time/_print/><i class="fa fa-print fa-fw"></i> Print entire section</a></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><h1>Dockerfile with CMD</h1><header class=article-meta><p class=reading-time><i class="fa fa-clock" aria-hidden=true></i> 2 minute read</p></header><p>In the Dockerfile for the previous example, you used the <code>ENTRYPOINT</code>
instruction to specify the process to execute in the container. This time you&rsquo;ll
use the <code>CMD</code> instruction instead and then explore the differences between the
two.</p><ul class="nav nav-tabs" id=tabs-0 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-0-0-tab data-toggle=tab href=#tabs-0-0 role=tab aria-controls=tabs-0-0 aria-selected=true>Dockerfile.using_cmd</a></li></ul><div class=tab-content id=tabs-0-content><div class="tab-pane fade show active" id=tabs-0-0 role=tabpanel aria-labelled-by=tabs-0-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-docker data-lang=docker><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#4e9a06> debian</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>COPY</span> get-time.sh /usr/local/bin<span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>RUN</span> chmod +x /usr/local/bin/get-time.sh<span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>CMD</span> <span style=color:#000;font-weight:700>[</span> <span style=color:#4e9a06>&#34;/usr/local/bin/get-time.sh&#34;</span> <span style=color:#000;font-weight:700>]</span></code></pre></div></div></div><p>Build a Docker image to run this.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker build -f Dockerfile.using_cmd -t get-time .
</code></pre></div><p>Since Docker looks for <code>Dockerfile</code> by default and you&rsquo;re going to try using a
few different Dockerfiles, you need to use the <code>-f</code> option to be explicit about
which one to use for the build.</p><p>Now print the time using a container.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker run -it --rm --name timectr get-time
</code></pre></div><ul class="nav nav-tabs" id=tabs-1 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-1-0-tab data-toggle=tab href=#tabs-1-0 role=tab aria-controls=tabs-1-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-1-content><div class="tab-pane fade show active" id=tabs-1-0 role=tabpanel aria-labelled-by=tabs-1-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Fetch UTC(NIST) time every 5 seconds...
21-09-02 19:28:45
21-09-02 19:28:51</code></pre></div></div></div><p>We used a new option for the <code>docker run</code> command: <code>-it</code>. This is actually a
combined option using two short flags, <code>-i</code> and <code>-t</code>. The first allows us to
pass input to the container over <code>stdin</code>; the second attaches a pseudo-terminal,
which means for one thing it can respond to the <code>SIGINT</code> signal when you press
<code>Ctrl-C</code> on your keyboard to terminate the process.</p><p>The container appears to behave the same way as when we used <code>ENTRYPOINT</code>
before. However, one difference is that <code>CMD</code> acts more like a default. You
can easily override the default command, as shown below.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker run -it --rm --name timectr get-time echo hello
</code></pre></div><ul class="nav nav-tabs" id=tabs-2 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-2-0-tab data-toggle=tab href=#tabs-2-0 role=tab aria-controls=tabs-2-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-2-content><div class="tab-pane fade show active" id=tabs-2-0 role=tabpanel aria-labelled-by=tabs-2-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>hello</code></pre></div></div></div><p>The <code>get-time.sh</code> script is no longer executed; instead, the command <code>echo</code> with
the argument <code>hello</code> was executed in the container. Since the base image for the
<code>get-time</code> image was <code>debian</code>, the standard <code>echo</code> command exists in the path
when the container is launched.</p><p>Because the argument that you provide in the <code>docker run</code> command replaces the
default command, you can&rsquo;t just provide the frequency option like this (since
there is no <code>2</code> command).</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text># this won&#39;t work!
docker run -it --rm --name timectr get-time 2
</code></pre></div><p>Instead, you need to supply the entire command to override the default one:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>docker run -it --rm --name timectr get-time get-time.sh 2
</code></pre></div><ul class="nav nav-tabs" id=tabs-3 role=tablist><li class=nav-item><a class="nav-link active" id=tabs-3-0-tab data-toggle=tab href=#tabs-3-0 role=tab aria-controls=tabs-3-0 aria-selected=true>Output</a></li></ul><div class=tab-content id=tabs-3-content><div class="tab-pane fade show active" id=tabs-3-0 role=tabpanel aria-labelled-by=tabs-3-0-tab><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Fetch UTC(NIST) time every 2 seconds...
21-09-02 19:29:42
21-09-02 19:29:44
^C</code></pre></div></div></div><p>Since <code>/usr/local/bin</code> is in the path for the <code>debian</code> image, it wasn&rsquo;t
necessary to fully qualify the path for <code>get-time.sh</code>. The fully-qualified
path was used in the <code>CMD</code> instruction is often a good practice for clarity.</p><p>Let&rsquo;s revisit using <code>ENTRYPOINT</code> next.</p><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><hr class=panel-line><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/subfuzion/dockerbyexample.dev/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/subfuzion/dockerbyexample.dev/issues/new>tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector('.feedback--answer-yes'),noButton=document.querySelector('.feedback--answer-no'),yesResponse=document.querySelector('.feedback--response-yes'),noResponse=document.querySelector('.feedback--response-no'),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=b=>{if(typeof ga!='function')return;const a={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:b};ga(a.command,a.hitType,a.category,a.action,a.label,a.value)};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(1)}),noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top"></div></div></main></div></div><footer class="bg-secondary py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-8 text-left"><small class=text-muted>&copy; 2021 <a href=https://twitter.com/tonypujals target=_blank rel=noopener>Tony Pujals</a>. All Rights Reserved.</small></div><div class="col-4 text-right"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-muted target=_blank rel=noopener href=https://twitter.com/tonypujals aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-muted target=_blank rel=noopener href=https://github.com/subfuzion/dockerbyexample.dev aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/js/main.min.5c74b870c6953931a705f390a49c7e4c0a842ec5c83b24354758dd674343ed0d.js integrity="sha256-XHS4cMaVOTGnBfOQpJx+TAqELsXIOyQ1R1jdZ0ND7Q0=" crossorigin=anonymous></script><script src=/js/prism.js></script></body></html>